"use strict";var t=Object.prototype.toString,r=function(r){if(void 0===r)return"undefined";if(null===r)return"null";var e,u=typeof r;if("boolean"===u)return"boolean";if("string"===u)return"string";if("number"===u)return"number";if("symbol"===u)return"symbol";if("function"===u)return e=r,"GeneratorFunction"===n(e)?"generatorfunction":"function";if(function(t){return Array.isArray?Array.isArray(t):t instanceof Array}(r))return"array";if(function(t){if(t.constructor&&"function"==typeof t.constructor.isBuffer)return t.constructor.isBuffer(t);return!1}(r))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(r))return"arguments";if(function(t){return t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate}(r))return"date";if(function(t){return t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit}(r))return"error";if(function(t){return t instanceof RegExp||"string"==typeof t.flags&&"boolean"==typeof t.ignoreCase&&"boolean"==typeof t.multiline&&"boolean"==typeof t.global}(r))return"regexp";switch(n(r)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(t){return"function"==typeof t.throw&&"function"==typeof t.return&&"function"==typeof t.next}(r))return"generator";switch(u=t.call(r)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return u.slice(8,-1).toLowerCase().replace(/\s/g,"")};function n(t){return"function"==typeof t.constructor?t.constructor.name:null}function e(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function u(t){return function r(n){return 0===arguments.length||e(n)?r:t.apply(this,arguments)}}function o(t){return function r(n,o){switch(arguments.length){case 0:return r;case 1:return e(n)?r:u((function(r){return t(n,r)}));default:return e(n)&&e(o)?r:e(n)?u((function(r){return t(r,o)})):e(o)?u((function(r){return t(n,r)})):t(n,o)}}}function i(t,r){switch(t){case 0:return function(){return r.apply(this,arguments)};case 1:return function(t){return r.apply(this,arguments)};case 2:return function(t,n){return r.apply(this,arguments)};case 3:return function(t,n,e){return r.apply(this,arguments)};case 4:return function(t,n,e,u){return r.apply(this,arguments)};case 5:return function(t,n,e,u,o){return r.apply(this,arguments)};case 6:return function(t,n,e,u,o,i){return r.apply(this,arguments)};case 7:return function(t,n,e,u,o,i,a){return r.apply(this,arguments)};case 8:return function(t,n,e,u,o,i,a,c){return r.apply(this,arguments)};case 9:return function(t,n,e,u,o,i,a,c,s){return r.apply(this,arguments)};case 10:return function(t,n,e,u,o,i,a,c,s,f){return r.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function a(t,r,n){return function(){for(var u=[],o=0,c=t,s=0;s<r.length||o<arguments.length;){var f;s<r.length&&(!e(r[s])||o>=arguments.length)?f=r[s]:(f=arguments[o],o+=1),u[s]=f,e(f)||(c-=1),s+=1}return c<=0?n.apply(this,u):i(c,a(t,u,n))}}var c=o((function(t,r){return 1===t?u(r):i(t,a(t,[],r))}));function s(t){return function r(n,i,a){switch(arguments.length){case 0:return r;case 1:return e(n)?r:o((function(r,e){return t(n,r,e)}));case 2:return e(n)&&e(i)?r:e(n)?o((function(r,n){return t(r,i,n)})):e(i)?o((function(r,e){return t(n,r,e)})):u((function(r){return t(n,i,r)}));default:return e(n)&&e(i)&&e(a)?r:e(n)&&e(i)?o((function(r,n){return t(r,n,a)})):e(n)&&e(a)?o((function(r,n){return t(r,i,n)})):e(i)&&e(a)?o((function(r,e){return t(n,r,e)})):e(n)?u((function(r){return t(r,i,a)})):e(i)?u((function(r){return t(n,r,a)})):e(a)?u((function(r){return t(n,i,r)})):t(n,i,a)}}}var f=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function l(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function p(t,r,n){return function(){if(0===arguments.length)return n();var e=arguments[arguments.length-1];if(!f(e)){for(var u=0;u<t.length;){if("function"==typeof e[t[u]])return e[t[u]].apply(e,Array.prototype.slice.call(arguments,0,-1));u+=1}if(l(e)){var o=r.apply(null,Array.prototype.slice.call(arguments,0,-1));return o(e)}}return n.apply(this,arguments)}}var y=function(){return this.xf["@@transducer/init"]()},h=function(t){return this.xf["@@transducer/result"](t)},d=o((function(t,r){return r>t?r:t}));function g(t){return"[object String]"===Object.prototype.toString.call(t)}var m=u((function(t){return!!f(t)||!!t&&("object"==typeof t&&(!g(t)&&(0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),b=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,r){return this.f(t,r)},t}();var v=o((function(t,r){return i(t.length,(function(){return t.apply(r,arguments)}))}));function A(t,r,n){for(var e=n.next();!e.done;){if((r=t["@@transducer/step"](r,e.value))&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}e=n.next()}return t["@@transducer/result"](r)}function S(t,r,n,e){return t["@@transducer/result"](n[e](v(t["@@transducer/step"],t),r))}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _(t,r,n){if("function"==typeof t&&(t=function(t){return new b(t)}(t)),m(n))return function(t,r,n){for(var e=0,u=n.length;e<u;){if((r=t["@@transducer/step"](r,n[e]))&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}e+=1}return t["@@transducer/result"](r)}(t,r,n);if("function"==typeof n["fantasy-land/reduce"])return S(t,r,n,"fantasy-land/reduce");if(null!=n[j])return A(t,r,n[j]());if("function"==typeof n.next)return A(t,r,n);if("function"==typeof n.reduce)return S(t,r,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var O=function(){function t(t,r){this.xf=r,this.f=t}return t.prototype["@@transducer/init"]=y,t.prototype["@@transducer/result"]=h,t.prototype["@@transducer/step"]=function(t,r){return this.xf["@@transducer/step"](t,this.f(r))},t}(),w=o((function(t,r){return new O(t,r)}));function x(t,r){return Object.prototype.hasOwnProperty.call(r,t)}var k=Object.prototype.toString,I=function(){return"[object Arguments]"===k.call(arguments)?function(t){return"[object Arguments]"===k.call(t)}:function(t){return x("callee",t)}}(),E=!{toString:null}.propertyIsEnumerable("toString"),q=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],U=function(){return arguments.propertyIsEnumerable("length")}(),z=function(t,r){for(var n=0;n<t.length;){if(t[n]===r)return!0;n+=1}return!1},F="function"!=typeof Object.keys||U?u((function(t){if(Object(t)!==t)return[];var r,n,e=[],u=U&&I(t);for(r in t)!x(r,t)||u&&"length"===r||(e[e.length]=r);if(E)for(n=q.length-1;n>=0;)x(r=q[n],t)&&!z(e,r)&&(e[e.length]=r),n-=1;return e})):u((function(t){return Object(t)!==t?[]:Object.keys(t)})),M=o(p(["fantasy-land/map","map"],w,(function(t,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return c(r.length,(function(){return t.call(this,r.apply(this,arguments))}));case"[object Object]":return _((function(n,e){return n[e]=t(r[e]),n}),{},F(r));default:return function(t,r){for(var n=0,e=r.length,u=Array(e);n<e;)u[n]=t(r[n]),n+=1;return u}(t,r)}}))),P=Number.isInteger||function(t){return t<<0===t},C=o((function(t,r){var n=t<0?r.length+t:t;return g(r)?r.charAt(n):r[n]})),D=o((function(t,r){if(null!=r)return P(t)?C(t,r):r[t]})),B=o((function(t,r){return M(D(t),r)})),N=s(_),L=u((function(t){return c(N(d,0,B("length",t)),(function(){for(var r=0,n=t.length;r<n;){if(!t[r].apply(this,arguments))return!1;r+=1}return!0}))})),R=u((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function W(t){return t}var T=u(W);function G(t){for(var r,n=[];!(r=t.next()).done;)n.push(r.value);return n}function X(t,r,n){for(var e=0,u=n.length;e<u;){if(t(r,n[e]))return!0;e+=1}return!1}var H="function"==typeof Object.is?Object.is:function(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r};function J(t,r,n,e){var u=G(t);function o(t,r){return K(t,r,n.slice(),e.slice())}return!X((function(t,r){return!X(o,r,t)}),G(r),u)}function K(t,r,n,e){if(H(t,r))return!0;var u,o,i=R(t);if(i!==R(r))return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof r["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](r)&&"function"==typeof r["fantasy-land/equals"]&&r["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof r.equals)return"function"==typeof t.equals&&t.equals(r)&&"function"==typeof r.equals&&r.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(u=t.constructor,null==(o=String(u).match(/^function (\w*)/))?"":o[1]))return t===r;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof r||!H(t.valueOf(),r.valueOf()))return!1;break;case"Date":if(!H(t.valueOf(),r.valueOf()))return!1;break;case"Error":return t.name===r.name&&t.message===r.message;case"RegExp":if(t.source!==r.source||t.global!==r.global||t.ignoreCase!==r.ignoreCase||t.multiline!==r.multiline||t.sticky!==r.sticky||t.unicode!==r.unicode)return!1}for(var a=n.length-1;a>=0;){if(n[a]===t)return e[a]===r;a-=1}switch(i){case"Map":return t.size===r.size&&J(t.entries(),r.entries(),n.concat([t]),e.concat([r]));case"Set":return t.size===r.size&&J(t.values(),r.values(),n.concat([t]),e.concat([r]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=F(t);if(c.length!==F(r).length)return!1;var s=n.concat([t]),f=e.concat([r]);for(a=c.length-1;a>=0;){var l=c[a];if(!x(l,r)||!K(r[l],t[l],s,f))return!1;a-=1}return!0}var Q=o((function(t,r){return K(t,r,[],[])}));function V(t,r){return function(t,r,n){var e,u;if("function"==typeof t.indexOf)switch(typeof r){case"number":if(0===r){for(e=1/r;n<t.length;){if(0===(u=t[n])&&1/u===e)return n;n+=1}return-1}if(r!=r){for(;n<t.length;){if("number"==typeof(u=t[n])&&u!=u)return n;n+=1}return-1}return t.indexOf(r,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(r,n);case"object":if(null===r)return t.indexOf(r,n)}for(;n<t.length;){if(Q(t[n],r))return n;n+=1}return-1}(r,t,0)>=0}var Y=function(){function t(t,r){this.xf=r,this.f=t}return t.prototype["@@transducer/init"]=y,t.prototype["@@transducer/result"]=h,t.prototype["@@transducer/step"]=function(t,r){return this.f(r)?this.xf["@@transducer/step"](t,r):t},t}(),Z=o(p(["fantasy-land/filter","filter"],o((function(t,r){return new Y(t,r)})),(function(t,r){return n=r,"[object Object]"===Object.prototype.toString.call(n)?_((function(n,e){return t(r[e])&&(n[e]=r[e]),n}),{},F(r)):function(t,r){for(var n=0,e=r.length,u=[];n<e;)t(r[n])&&(u[u.length]=r[n]),n+=1;return u}(t,r);var n}))),$=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!tt(t,!0,this)},t.prototype.has=function(t){return tt(t,!1,this)},t}();function tt(t,r,n){var e,u=typeof t;switch(u){case"string":case"number":return 0===t&&1/t==-1/0?!!n._items["-0"]||(r&&(n._items["-0"]=!0),!1):null!==n._nativeSet?r?(e=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===e):n._nativeSet.has(t):u in n._items?t in n._items[u]||(r&&(n._items[u][t]=!0),!1):(r&&(n._items[u]={},n._items[u][t]=!0),!1);case"boolean":if(u in n._items){var o=t?1:0;return!!n._items[u][o]||(r&&(n._items[u][o]=!0),!1)}return r&&(n._items[u]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?r?(e=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===e):n._nativeSet.has(t):u in n._items?!!V(t,n._items[u])||(r&&n._items[u].push(t),!1):(r&&(n._items[u]=[t]),!1);case"undefined":return!!n._items[u]||(r&&(n._items[u]=!0),!1);case"object":if(null===t)return!!n._items.null||(r&&(n._items.null=!0),!1);default:return(u=Object.prototype.toString.call(t))in n._items?!!V(t,n._items[u])||(r&&n._items[u].push(t),!1):(r&&(n._items[u]=[t]),!1)}}var rt=function(){function t(t,r){this.xf=r,this.f=t,this.set=new $}return t.prototype["@@transducer/init"]=y,t.prototype["@@transducer/result"]=h,t.prototype["@@transducer/step"]=function(t,r){return this.set.add(this.f(r))?this.xf["@@transducer/step"](t,r):t},t}(),nt=o(p([],o((function(t,r){return new rt(t,r)})),(function(t,r){for(var n,e,u=new $,o=[],i=0;i<r.length;)n=t(e=r[i]),u.add(n)&&o.push(e),i+=1;return o})))(T),et=s((function(t,r,n){return Q(r,D(t,n))})),ut=o((function(t,r){for(var n=0,e=Math.min(t.length,r.length),u={};n<e;)u[t[n]]=r[n],n+=1;return u})),ot=ut,it=s((function(t,r,n){for(var e=[],u=0,o=Math.min(r.length,n.length);u<o;)e[u]=t(r[u],n[u]),u+=1;return e}));module.exports=class{constructor(t,r){this.source=t,this.condition=r}pivot(){const t=this.source,n=this.condition;if(!(t&&n&&t.length&&n.length))return void console.error("Invalid arguments");if("array"!==r(t))return void console.error('"source" must be array type');if("array"!==r(n))return void console.error('"condition" must be array type');const e=[],u=[],o=[];for(const r of n){const n=nt(M(D(r),t));u.push(r),o.push(n)}const i=function(...t){return t.reduce(((t,r)=>t.flatMap((t=>r.map((r=>[t,r].flat()))))))}(...o),a=[];i.forEach((t=>{let n=t;"array"!==r(t)&&(n=[t]);const e=it(((t,r)=>et(t,r)),u,n),o=ot(u,n);a.push({condition:o,expression:e})}));for(const r of a){const n=Z(L(r.expression),t);e.push({condition:r.condition,data:n})}return e}};
